{"ast":null,"code":"var _jsxFileName = \"E:\\\\web3\\\\circulus\\\\circulus\\\\client\\\\src\\\\components\\\\Tweet\\\\Tweet.jsx\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport React, { useState } from \"react\";\nimport formatDistance from \"date-fns/formatDistance\";\nimport { useEffect } from \"react\";\nimport { Link, useLocation, useParams } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport FavoriteBorderIcon from \"@mui/icons-material/FavoriteBorder\";\nimport FavoriteIcon from \"@mui/icons-material/Favorite\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Tweet = _ref => {\n  _s();\n  let {\n    tweet,\n    setData\n  } = _ref;\n  const {\n    currentUser\n  } = useSelector(state => state.user);\n  const [userData, setUserData] = useState();\n  const dateStr = formatDistance(new Date(tweet.createdAt), new Date());\n  const location = useLocation().pathname;\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const findUser = await axios.get(`/users/find/${tweet.userId}`);\n        setUserData(findUser.data);\n      } catch (err) {\n        console.log(\"error\", err);\n      }\n    };\n    fetchData();\n  }, [tweet.userId, tweet.likes]);\n  const handleLike = async e => {\n    e.preventDefault();\n    try {\n      const like = await axios.put(`/tweets/${tweet._id}/like`, {\n        id: currentUser._id\n      });\n      if (location.includes(\"profile\")) {\n        const newData = await axios.get(`/tweets/user/all/${id}`);\n        setData(newData.data);\n      } else if (location.includes(\"explore\")) {\n        const newData = await axios.get(`/tweets/explore`);\n        setData(newData.data);\n      } else {\n        const newData = await axios.get(`/tweets/timeline/${currentUser._id}`);\n        setData(newData.data);\n      }\n    } catch (err) {\n      console.log(\"error\", err);\n    }\n  };\n  if ((tweet === null || tweet === void 0 ? void 0 : tweet.picture) == null) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: userData && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: userData === null || userData === void 0 ? void 0 : userData.profilePicture,\n            alt: \"Avatar\",\n            className: \"w-12 h-12 rounded-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: `/profile/${userData._id}`,\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-bold\",\n              children: userData.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-normal\",\n            children: [\"@\", userData.username]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\" - \", dateStr]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: tweet.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLike,\n          children: [tweet.likes.includes(currentUser._id) ? /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n            className: \"mr-2 my-2 cursor-pointer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(FavoriteBorderIcon, {\n            className: \"mr-2 my-2 cursor-pointer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 17\n          }, this), tweet.likes.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: userData && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: userData === null || userData === void 0 ? void 0 : userData.profilePicture,\n          alt: \"Avatar\",\n          className: \"w-12 h-12 rounded-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: `/profile/${userData._id}`,\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-bold\",\n            children: userData.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-normal\",\n          children: [\"@\", userData.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" - \", dateStr]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: tweet.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: tweet.picture,\n        alt: \"picture\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n        width: \"750\",\n        height: \"500\",\n        controls: true,\n        children: /*#__PURE__*/_jsxDEV(\"source\", {\n          src: tweet.picture,\n          type: \"video/mp4/mp3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLike,\n        children: [tweet.likes.includes(currentUser._id) ? /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n          className: \"mr-2 my-2 cursor-pointer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(FavoriteBorderIcon, {\n          className: \"mr-2 my-2 cursor-pointer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 15\n        }, this), tweet.likes.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_s(Tweet, \"RSrL4981Vt7+eyxhfqPS/buxxvk=\", false, function () {\n  return [useSelector, useLocation, useParams];\n});\n_c = Tweet;\nexport default Tweet;\nvar _c;\n$RefreshReg$(_c, \"Tweet\");","map":{"version":3,"names":["axios","React","useState","formatDistance","useEffect","Link","useLocation","useParams","useSelector","FavoriteBorderIcon","FavoriteIcon","Tweet","tweet","setData","currentUser","state","user","userData","setUserData","dateStr","Date","createdAt","location","pathname","id","fetchData","findUser","get","userId","data","err","console","log","likes","handleLike","e","preventDefault","like","put","_id","includes","newData","picture","profilePicture","username","description","length"],"sources":["E:/web3/circulus/circulus/client/src/components/Tweet/Tweet.jsx"],"sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\nimport formatDistance from \"date-fns/formatDistance\";\nimport { useEffect } from \"react\";\nimport { Link, useLocation, useParams } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\n\nimport FavoriteBorderIcon from \"@mui/icons-material/FavoriteBorder\";\nimport FavoriteIcon from \"@mui/icons-material/Favorite\";\n\nconst Tweet = ({ tweet, setData }) => {\n  const { currentUser } = useSelector((state) => state.user);\n\n  const [userData, setUserData] = useState();\n  const dateStr = formatDistance(new Date(tweet.createdAt), new Date());\n  const location = useLocation().pathname;\n  const { id } = useParams();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const findUser = await axios.get(`/users/find/${tweet.userId}`);\n\n        setUserData(findUser.data);\n      } catch (err) {\n        console.log(\"error\", err);\n      }\n    };\n\n    fetchData();\n  }, [tweet.userId, tweet.likes]);\n\n  const handleLike = async (e) => {\n    e.preventDefault();\n\n    try {\n      const like = await axios.put(`/tweets/${tweet._id}/like`, {\n        id: currentUser._id,\n      });\n\n      if (location.includes(\"profile\")) {\n        const newData = await axios.get(`/tweets/user/all/${id}`);\n        setData(newData.data);\n      } else if (location.includes(\"explore\")) {\n        const newData = await axios.get(`/tweets/explore`);\n        setData(newData.data);\n      } else {\n        const newData = await axios.get(`/tweets/timeline/${currentUser._id}`);\n        setData(newData.data);\n      }\n    } catch (err) {\n      console.log(\"error\", err);\n    }\n  };\n\n  if(tweet?.picture==null)\n  {\n    return (\n      <div>\n        {userData && (\n          <>\n            <div className=\"flex space-x-2\">\n              { <img src={userData?.profilePicture} alt=\"Avatar\"className=\"w-12 h-12 rounded-full\" /> }\n              <Link to={`/profile/${userData._id}`}>\n                <h3 className=\"font-bold\">{userData.username}</h3>\n              </Link>\n              <span className=\"font-normal\">@{userData.username}</span>\n              <p> - {dateStr}</p>\n            </div>\n  \n            <p>{tweet.description}</p> \n            <button onClick={handleLike}>\n              {tweet.likes.includes(currentUser._id) ? (\n                <FavoriteIcon className=\"mr-2 my-2 cursor-pointer\"></FavoriteIcon>\n              ) : (\n                <FavoriteBorderIcon className=\"mr-2 my-2 cursor-pointer\"></FavoriteBorderIcon>\n              )}\n              {tweet.likes.length}\n            </button>\n          </>\n        )}\n      </div>\n    );\n  }\n  return (\n    <div>\n      {userData && (\n        <>\n          <div className=\"flex space-x-2\">\n            { <img src={userData?.profilePicture} alt=\"Avatar\"className=\"w-12 h-12 rounded-full\" /> }\n            <Link to={`/profile/${userData._id}`}>\n              <h3 className=\"font-bold\">{userData.username}</h3>\n            </Link>\n            <span className=\"font-normal\">@{userData.username}</span>\n            <p> - {dateStr}</p>\n          </div>\n\n          <p>{tweet.description}</p>\n          <img\n              src={tweet.picture}\n                alt=\"picture\"\n          />         \n           <video width=\"750\" height=\"500\" controls >\n              <source src={tweet.picture} type=\"video/mp4/mp3\"/>\n          </video>\n          <button onClick={handleLike}>\n            {tweet.likes.includes(currentUser._id) ? (\n              <FavoriteIcon className=\"mr-2 my-2 cursor-pointer\"></FavoriteIcon>\n            ) : (\n              <FavoriteBorderIcon className=\"mr-2 my-2 cursor-pointer\"></FavoriteBorderIcon>\n            )}\n            {tweet.likes.length}\n          </button>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Tweet;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}